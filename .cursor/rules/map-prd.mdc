---
description: 
globs: 
alwaysApply: false
---
# 地图管理

## 需求

- 新增地图
    - 上传地图获取到文件路径后才能上传 (仿[头像上传](https://element-plus.org/zh-CN/component/upload.html#%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F))
    - 地图名称必填
- 修改地图
    - 地图名称
    - 重新上传地图
- 删除地图

## 相关文件

- [map.ts](mdc:src/router/modules/map.ts): 路由模块 (仿 [task.ts](mdc:src/router/modules/task.ts) )
- [map.ts](mdc:src/api/map.ts): 接口模块
- [MapManagement.vue](mdc:src/views/map/MapManagement.vue): 路由对应页面组件 (仿 [TaskList.vue](mdc:src/views/task/TaskList.vue) )

## 接口

### 获取地图列表

接口地址: /robot-map/v1/list

请求方法: GET

响应: 

```json
{
    "list": [
        {
            // 地图 ID
            "id": 1,
            // 地图名称
            "name": "test1",
            // 地图文件路径
            "path": "http://192.168.18.229:8283/image/2025/4/1743500385182.png",
        },
    ],
}
```

### 上传地图文件

接口地址: /robot-map/v1/upload

请求方法: POST

请求参数:

- file: 文件二进制

注意: 需要 token

响应:

```json
{
    // 上传后的地图文件访问路径
    "fileUrl": "http://192.168.18.229:19000/warehouse/image/map/2025/04/03/mKAKeC.png"
}
```

### 添加地图

接口地址: /robot-map/v1/add

请求方法: POST

请求参数:

- path: 地图文件访问路径

### 修改地图

接口地址: /robot-map/v1/update

请求方法: PUT

请求参数:

- id: 地图 ID
- path: 地图文件访问路径

### 删除地图

接口地址: /robot-map/v1/{id}

请求方法: delete

请求参数

- id: 地图 ID

